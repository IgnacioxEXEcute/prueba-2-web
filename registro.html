<!DOCTYPE html>
<html>

<head>
    <!--Boostrap-->
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Deportes Manicos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <LINK REL=StyleSheet HREF="estilos.css" TYPE="text/css" MEDIA=screen>
    <link rel="icon" type="image/svg" href="Img/pelota.svg" />
</head>

<body id="fondo">
    <!--nav bar-->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html"> <img src="Img/pelota.svg" height="40" width="40"> Deportes
                manicos</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText"
                aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="registro.html">registrarse</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Deportes.html">Deportes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Ligas de España.html">Ligas de España</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div id="cuerpo" class="container"></div>
    <!--formulario-->
    <form action="" method="post" name="Datos personales" id="formulario">
        <h4>Regristrate y comenta</h4>
        <div>
            <label for="nombre">Nombre:</label>
            <input type="text" name="nombre" id="nombre" placeholder="Ingrese su nombre">
            <br><br>
            <label for="apellido">Apellido:</label>
            <input type="text" name="Apellido" id="apellido" placeholder="Ingrese su apellido">
            <br><br>
            <label for="rut">Rut:</label>
            <input type="text" name="rut" id="rut" placeholder="sin '.' y con '-'">
            <br><br>
            <label for="correo">Correo:</label>
            <input type="email" name="correo" id="correo" placeholder="Ingrese su contraseña">
            <br><br>
            <label for="password">Contraseña:</label>
            <input type="password" name="password" id="contraseña" placeholder="Ingrese contraseña">
            <br><br>
            <label for="re password">Reingrese Contraseña:</label>
            <input type="password" name="re password" id="recontraseña" placeholder="Reingrese Contraseña">

            <br><br>
            <label for="comentario">Comentarios:</label>
            (opcional)
            <br>
            <textarea name="comentario" id="" cols="30" rows="10"></textarea>
            <br><br>
            <input type="submit" value="Enviar">
            <div class="alert alert-danger" id="error"></div>
        </div>

    </form>

    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
        crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
            $("#error").hide();
            $("#formulario").submit(function () {
                var mensaje = "";
                if ($("#recontraseña").val().trim().length == 0) {
                    mensaje = "Falta reingresar la contraseña"
                }
                if ($("#contraseña").val().trim().length == 0) {
                    mensaje = "La contraseña está en blanco"
                }
                if ($("#correo").val().trim().length == 0) {
                    mensaje = "El correo está en blanco"
                }
                if ($("#rut").val().trim().length == 0) {
                    mensaje = "El rut está en blanco"
                }
                else{
                    var rutValidado = validarRut($("#rut").val());
                    if(rutValidado==false){
                        mensaje = "Rut incorrecto"
                    }
                }
                if ($("#apellido").val().trim().length == 0) {
                    mensaje = "El apellido esta en blanco"
                }
                if ($("#nombre").val().trim().length == 0) {
                    mensaje = "El nombre esta en blanco"
                }
                if ($("#contraseña").val() !== $("#recontraseña").val()) {
                    mensaje = "Las contraseñas no coinciden"
                }
                if (mensaje != "") {
                    $("#error").html(mensaje);
                    $("#error").show();
                    event.preventDefault();
                }







                function validarRut(rut) {
                    if (rut.toString().trim() != '' && rut.toString().indexOf('-') > 0) {
                        var caracteres = new Array();
                        var serie = new Array(2, 3, 4, 5, 6, 7);
                        var dig = rut.toString().substr(rut.toString().length - 1, 1);
                        rut = rut.toString().substr(0, rut.toString().length - 2);

                        for (var i = 0; i < rut.length; i++) {
                            caracteres[i] = parseInt(rut.charAt((rut.length - (i + 1))));
                        }

                        var sumatoria = 0;
                        var k = 0;
                        var resto = 0;

                        for (var j = 0; j < caracteres.length; j++) {
                            if (k == 6) {
                                k = 0;
                            }
                            sumatoria += parseInt(caracteres[j]) * parseInt(serie[k]);
                            k++;
                        }

                        resto = sumatoria % 11;
                        dv = 11 - resto;

                        if (dv == 10) {
                            dv = "K";
                        } else if (dv == 11) {
                            dv = 0;
                        }

                        if (dv.toString().trim().toUpperCase() == dig.toString().trim().toUpperCase())
                            return true;
                        else
                            return false;
                    } else {
                        return false;
                    }

                }
            });



        });
    </script>
</body>

</html>